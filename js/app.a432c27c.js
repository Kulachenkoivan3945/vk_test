(function(){"use strict";var e={3604:function(e,s,t){var i=t(9242),o=t(3396);function r(e,s,t,i,r,n){const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(a,null,{default:(0,o.w5)((({Component:s})=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[e.$route.meta.keepAlive?((0,o.wg)(),(0,o.j4)((0,o.LL)(s),{key:0})):(0,o.kq)("",!0)],1024)),e.$route.meta.keepAlive?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)((0,o.LL)(s),{key:0}))])),_:1})}var n={name:"App",components:{},data(){return{}},created(){localStorage.getItem("sourceList")&&this.$store.commit("setSourceList",JSON.parse(localStorage.getItem("sourceList"))),localStorage.getItem("friendsInSource")&&this.$store.commit("setFriendsInSource",JSON.parse(localStorage.getItem("friendsInSource")))}},a=t(89);const l=(0,a.Z)(n,[["render",r]]);var u=l,c=(t(7658),t(65)),h=(0,c.MT)({state:{apiConfig:{appID:"51774176",version:"5.154"},searchResults:[],sourceList:[],friendsInSource:[]},getters:{isInSourceList:e=>s=>{let t=e.sourceList.findIndex((e=>e.id==s));return-1!=t},getFriendsInSource:e=>e.friendsInSource},mutations:{setSourceList(e,s){e.sourceList=s},setFriendsInSource(e,s){e.friendsInSource=s,localStorage.setItem("friendsInSource",JSON.stringify(e.friendsInSource))},setSearchResults(e,s){e.searchResults=s},addToSourceList(e,s){e.sourceList.push(s),localStorage.setItem("sourceList",JSON.stringify(e.sourceList))},removeFromSourceList(e,s){let t=e.sourceList.findIndex((e=>e.id==s.id));e.sourceList.splice(t,1),localStorage.setItem("sourceList",JSON.stringify(e.sourceList))}},actions:{},modules:{}}),d=t(2483);const g={class:"home"},p={class:"search"},A={key:0,class:"search-results"},f={class:"source-list"},m={class:"friends"},w={class:"checkbox-id",for:"checkboxFriends"};function I(e,s,t,r,n,a){const l=(0,o.up)("SearchBar"),u=(0,o.up)("UsersList");return(0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("section",p,[(0,o.Wm)(l,{onOnSearched:a.setSearchResults},null,8,["onOnSearched"])]),n.isSearchListShowed?((0,o.wg)(),(0,o.iD)("section",A,[(0,o.Wm)(u,{items:e.searchResults,startState:!1,mode:"search",title:"Количество результатов по вашему запросу : ",onOnHide:s[0]||(s[0]=e=>n.isSearchListShowed=!1)},null,8,["items"])])):(0,o.kq)("",!0),(0,o._)("section",f,[n.isConnected?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:s[1]||(s[1]=(...e)=>a.logIn&&a.logIn(...e))}," Авторизоваться (без этого функционал недоступен) ")),n.isSourceListShowed?((0,o.wg)(),(0,o.j4)(u,{key:2,items:e.sourceList,startState:n.isSourceListShowed,mode:"source",title:"Количество пользователей в исходном списке : ",onOnHide:s[3]||(s[3]=e=>n.isSourceListShowed=!1)},null,8,["items","startState"])):((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn-add",onClick:s[2]||(s[2]=e=>n.isSourceListShowed=!0)},"Показать исходный список"))]),(0,o._)("section",m,[(0,o._)("div",null,[(0,o._)("label",w,[(0,o.Uk)("Отображать число друзей пользователя (занимает много времени) "),(0,o.wy)((0,o._)("input",{type:"checkbox",name:"checkboxFriends",id:"checkboxFriends","onUpdate:modelValue":s[4]||(s[4]=e=>n.isShowedWithFriendsCount=e),onChange:s[5]||(s[5]=(...e)=>a.setUserFriends&&a.setUserFriends(...e))},null,544),[[i.e8,n.isShowedWithFriendsCount]])])]),n.isFriendsListShowed?((0,o.wg)(),(0,o.j4)(u,{key:1,items:n.friendsList,startState:n.isFriendsListShowed,mode:"friends",title:"Количество пользователей в списке друзей: ",onOnHide:s[7]||(s[7]=e=>n.isFriendsListShowed=!1)},null,8,["items","startState"])):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:s[6]||(s[6]=(...e)=>a.buildFriendsList&&a.buildFriendsList(...e))},"Построить"))])])}var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAlxJREFUOE+dVTGLE0EUfm9OjYeeIZCAYJEU1wVC2oA7k+5ATOOSSlTUykYshCtOlMMDRbn8hCtULIRdEGNtZpJ06YUgh0o0kAQ5OCMRzD6ZIRvGdfdAq5m3M++b9733vbdYr9dXAADG4zHqNZfLUWjb++hZaEf9UAPaH/VeKbVFRJsAsKodAeAnIjY45/cXtnk49LPBsVqtHgs/NJvNs7PZ7DMAsIVjsFhDm1Kp1HqtVvsUB6bvGkD9WqvVWp1MJocLgGY+n68XCoVf2h4MBiv7+/vPiaiu7XQ6nSmXy9/jaC8pSyk/AEAeEbc55zshNXtVSt0mol0AGAkhztm0w3wbQCu6mRBiLQ4sdJZSfgOAtaQoDeV2u30hCILXiPjITnxcAZRSd4joKWPsmuM4L6PFMRF6nqepNBhjlxzHeWNHGHXodDrn5/P5O0R86LrudrQ4BtD3/Y0gCN4i4hPO+dZR0vA87y4RPWaMXXYc51X0rqHc7/dPDIfDqdabEOJ0tHq2LaU8AIBTmUwmXSqVfkTvLnUopXwPAOuIuOu67maczpRS94joAQB8EUIUjpSNFaW+J7PZ7MVisTjTOVRKnRyNRh4AbBjxIr7gnF9PlE0YTa/Xy0yn068AYLoHAExfawyrc0zXIOIzzvnNRMr2a0qpW0SkxX1mAXSIiDuc80a73b4SBMFeCOq67g07PcvWS+rNuCHg+/5VG9SO9I9pE5fkpIeSIl1W+V/AwqhtUCHEcZMGe3xF52KcwKMp6Ha7ZcbYQaVS+ajPDGXt+D9gcfn9a2Ingcf9DuJ+G78BR57ZovdonTQAAAAASUVORK5CYII=";const k=e=>((0,o.dD)("data-v-43efb916"),e=e(),(0,o.Cn)(),e),S={for:"searchBar"},v=k((()=>(0,o._)("img",{src:L,alt:""},null,-1))),y={class:"checkbox-id",for:"IDSearch"},_=k((()=>(0,o._)("span",null,"Искать по числовому id",-1))),D={key:0,class:"auto-complete"},C={key:0},b=["onClick"],F={key:1};function O(e,s,t,r,n,a){const l=(0,o.up)("UserInfoMin");return(0,o.wg)(),(0,o.iD)("div",{class:"search-container",onMouseleave:s[6]||(s[6]=e=>n.isSearched=!1),onMouseover:s[7]||(s[7]=e=>n.isSearched=!0)},[(0,o._)("label",S,[v,(0,o.wy)((0,o._)("input",{type:"search",id:"searchBar",name:"searchBar","onUpdate:modelValue":s[0]||(s[0]=e=>n.query=e),onInput:s[1]||(s[1]=(...e)=>a.fastSearch&&a.fastSearch(...e)),onKeydown:s[2]||(s[2]=(0,i.D2)(((...e)=>a.search&&a.search(...e)),["enter"])),placeholder:"Введите запрос..."},null,544),[[i.nr,n.query]]),(0,o._)("button",{onClick:s[3]||(s[3]=(...e)=>a.search&&a.search(...e))},"найти"),(0,o._)("label",y,[_,(0,o.wy)((0,o._)("input",{type:"checkbox",name:"IDSearch",id:"IDSearch","onUpdate:modelValue":s[4]||(s[4]=e=>n.isSearchByID=e),onChange:s[5]||(s[5]=(...e)=>a.fastSearch&&a.fastSearch(...e))},null,544),[[i.e8,n.isSearchByID]])])]),(0,o.Wm)(i.uT,{name:"fade"},{default:(0,o.w5)((()=>[n.isSearched&&""!=n.query?((0,o.wg)(),(0,o.iD)("div",D,[n.autoCompleteResults.length>0?((0,o.wg)(),(0,o.iD)("ul",C,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.autoCompleteResults,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,onClick:s=>a.selectQueryItem(e)},[(0,o.Wm)(l,{userInfo:e},null,8,["userInfo"])],8,b)))),128))])):((0,o.wg)(),(0,o.iD)("p",F,"По вашему запросу ничего не найдено"))])):(0,o.kq)("",!0)])),_:1})],32)}var U=t(7020),E=t.n(U);class N{constructor(){this.appID="51776175",this.v="5.154",this.init()}init(){E().init({apiId:this.appID})}checkConnection(e){E().Auth.getLoginStatus(e)}login(e){E().Auth.login(e)}getInfo(e,s,t){s.v=this.v,E().Api.call(e,s,t)}}var R=new N,x=t(7139);const z={class:"user-info-min"},P=["src"];function B(e,s,t,i,r,n){return(0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("img",{src:t.userInfo.photo_50,alt:""},null,8,P),(0,o._)("p",null,(0,x.zw)(t.userInfo.first_name)+" "+(0,x.zw)(t.userInfo.last_name),1)])}var M={name:"UserInfoMin",props:["userInfo"]};const V=(0,a.Z)(M,[["render",B],["__scopeId","data-v-83c710fa"]]);var W=V,Y=t(4806),q=t.n(Y),H={name:"SearchBar",components:{UserInfoMin:W},data(){return{query:"",isSearchByID:!1,autoCompleteResults:[],isSearched:!1}},watch:{query(e){document.querySelector(".search-container").style.maxHeight=""!=e?"400px":"70px"},isSearched(e){document.querySelector(".search-container").style.maxHeight=e?"400px":"70px"}},methods:{selectQueryItem(e){this.isSearchByID||(this.query=`${e.first_name} ${e.last_name}`),this.search()},search(){this.isSearched=!1;let e="";e=this.isSearchByID?"id"+this.query:this.query,R.getInfo("users.search",{q:e,fields:"sex,photo_100,bdate",count:100,language:"ru"},(e=>{try{this.$store.commit("setSearchResults",e.response.items),this.$emit("onSearched")}catch{this.isSearched=!1,this.$emit("onSearched"),this.$store.commit("setSearchResults",[])}}))},fastSearch:q().debounce((function(){this.isSearched=!0;let e="";e=this.isSearchByID?"id"+this.query:this.query,R.getInfo("users.search",{q:e,fields:"photo_50",count:5,language:"ru"},(e=>{try{this.autoCompleteResults=e.response.items}catch{this.isSearched=!1,this.autoCompleteResults=[]}}))}),200)},created(){},mounted(){}};const T=(0,a.Z)(H,[["render",O],["__scopeId","data-v-43efb916"]]);var J=T,G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAFdQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Dim1fwAAABx0Uk5TADNCAT04QcpQSchMy8lcT0jS1VvW3FFGTQJHQIpKf1gAAAABYktHRBycBEEHAAAACXBIWXMAAAAnAAAAJwEqCZFPAAAAgElEQVQ4y92QWQ6AMAgFcae1rnX3/vdUE2MECweQP5gJLQ/gRxXFCZukGWnzAik3tqQDdMQwVc1XEiPAiRHkL0PgjyHy21D4ZTStxgGarvcah3YYJ42byk8ONX6+j7Jx/180nvsE43V/0CD5BAyW38dILcsP3Uz6bFnZym2HH9UBeZEFV9HKSGUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDItMTRUMTA6MzU6MDIrMDE6MDD1ZNrFAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTAyLTE0VDEwOjM1OjAyKzAxOjAwhDlieQAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNDg3MDY0OTAy20ZKigAAABN0RVh0VGh1bWI6OlNpemUAMy4zNktCQoE1tJQAAABPdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy9jYXJsb3NwcmV2aS9rd2dOSmNOLzExNTcvMTQ4NzA4NjM0NS1jcm9zc184MTU3Ny5wbmcXpSMbAAAAAElFTkSuQmCC";const Z={class:"list-control"},j={key:0},Q=["id"],X={key:0,class:"list-pages"},K=["onClick"];function $(e,s,t,r,n,a){const l=(0,o.up)("UserInfoFull");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Z,[(0,o._)("h3",null,(0,x.zw)(t.title)+" "+(0,x.zw)(t.items.length),1),(0,o._)("img",{src:G,alt:"",onClick:s[0]||(s[0]=(...e)=>a.hideList&&a.hideList(...e))})]),(0,o.Wm)(i.uT,{name:"fade-to-top"},{default:(0,o.w5)((()=>[a.showedResults.length>0?((0,o.wg)(),(0,o.iD)("div",j,[(0,o._)("ul",{id:t.mode+"List"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.showedResults,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(l,{userInfo:e,mode:t.mode,isNoActions:"friends"===t.mode},null,8,["userInfo","mode","isNoActions"])])))),128))],8,Q),t.items.length/n.showedCount>1?((0,o.wg)(),(0,o.iD)("div",X,[(0,o._)("span",{onClick:s[1]||(s[1]=e=>a.getToPage(-1)),class:(0,x.C_)({"active-page":0==e.n})},"В начало",2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.pagesList,((e,s)=>((0,o.wg)(),(0,o.iD)("span",{key:e,class:(0,x.C_)({"active-page":e==n.activePage}),onClick:e=>a.getToPage(s)},(0,x.zw)(e+1),11,K)))),128)),(0,o._)("span",{onClick:s[2]||(s[2]=e=>a.getToPage(-2)),class:(0,x.C_)({"active-page":e.n==Math.ceil(t.items.length/n.showedCount)-1})},"В конец",2)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1})],64)}const ee={class:"user-info"},se=["src"],te={class:"user-data"},ie={class:"name"},oe={class:"bdate"},re={class:"sex"},ne={key:0,class:"friends"},ae={key:1,class:"friends"},le={key:0,class:"actions"};function ue(e,s,t,r,n,a){return(0,o.wg)(),(0,o.iD)("div",{class:(0,x.C_)(["user-info-full",{"friend-card":"friends"===t.mode}]),style:(0,x.j5)({"background-color":a.panelBgColor}),onClick:s[2]||(s[2]=(...e)=>a.toPage&&a.toPage(...e))},[(0,o._)("div",ee,[(0,o._)("img",{src:t.userInfo.photo_100,alt:""},null,8,se),(0,o._)("div",te,[(0,o._)("p",ie,(0,x.zw)(t.userInfo.first_name)+" "+(0,x.zw)(t.userInfo.last_name),1),(0,o._)("p",oe,"Дата рождения: "+(0,x.zw)(a.bDate),1),(0,o._)("p",re,"Пол: "+(0,x.zw)(a.sex),1),"friends"==t.mode?((0,o.wg)(),(0,o.iD)("p",ne,"В друзьях у: "+(0,x.zw)(t.userInfo.commomFriends.length)+" пользователя",1)):(0,o.kq)("",!0),"friends"==t.mode&&void 0!==t.userInfo.friendsCount?((0,o.wg)(),(0,o.iD)("p",ae,"Кол-во друзей: "+(0,x.zw)(t.userInfo.friendsCount),1)):(0,o.kq)("",!0)])]),t.isNoActions?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",le,[a.isInSorceList?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn-add btn-added",onClick:s[1]||(s[1]=(0,i.iM)(((...e)=>a.removeFromSourceList&&a.removeFromSourceList(...e)),["stop"]))},"Удалить")):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:s[0]||(s[0]=(0,i.iM)(((...e)=>a.addToSourceList&&a.addToSourceList(...e)),["stop"]))},"Добавить"))]))],6)}var ce={name:"UserInfoFull",props:["userInfo","mode","isNoActions"],data(){return{}},computed:{isInSorceList(){return this.$store.getters.isInSourceList(this.userInfo.id)},sex(){switch(this.userInfo.sex){case 1:return"Ж";case 2:return"М";default:return"*"}},bDate(){return this.userInfo.bdate?this.userInfo.bdate:"не указана"},panelBgColor(){if("friends"!==this.mode)return"white";{let e=255-20*(this.userInfo.commomFriends.length-1),s=255-20*(this.userInfo.commomFriends.length-1)*.5;e<=0&&(e=20),s<=0&&(s=20);let t=`rgba(${e},${s},255,0.8)`;return t}}},methods:{toPage(){"friends"===this.mode&&(this.$store.commit("setFriendsInSource",this.userInfo.commomFriends),this.$router.push(`/user/${this.userInfo.id}`))},addToSourceList(){this.$store.commit("addToSourceList",this.userInfo),this.isInSorceList=!0},removeFromSourceList(){this.$store.commit("removeFromSourceList",this.userInfo),this.isInSorceList=!1}}};const he=(0,a.Z)(ce,[["render",ue],["__scopeId","data-v-d8654058"]]);var de=he,ge={name:"UsersList",components:{UserInfoFull:de},props:["items","startState","mode","title"],data(){return{showedCount:20,activePage:0,isShowed:this.startState,pagesList:[0,1,2,3,4]}},computed:{pagesCount(){return Math.ceil(this.items.length/this.showedCount)},showedResults(){return JSON.parse(JSON.stringify(this.items)).splice(this.showedCount*this.activePage,this.showedCount)}},watch:{showedResults(e){this.pagesList.length<5&&this.setPagesCount(this.pagesCount),e.length>0&&(this.isShowed=!0)}},methods:{setPagesCount(e){this.pagesList=[];for(let s=0;s<e;s++)if(this.pagesList.push(s),4==s)return},getToPage(e){this.activePage=this.getNextPageNumber(e);let s=document.querySelector(`#${this.mode}List`);s.scrollIntoView({behavior:"smooth"})},getNextPageNumber(e){if(-2==e){if(5==this.pagesList.length){this.pagesList=[];for(let e=5;e>=1;e--)this.pagesList.push(this.pagesCount-e);return this.pagesList[4]}return this.pagesList[this.pagesList.length-1]}if(-1==e){if(5==this.pagesList.length){this.pagesList=[];for(let e=0;e<=4;e++)this.pagesList.push(e)}return this.pagesList[0]}switch(e){case 0:if(this.activePage==this.pagesList[0])return this.pagesList[0];if(this.activePage==this.pagesList[1]){if(0==this.pagesList[0])return this.pagesList[0];{let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e-=1,this.pagesList.push(e)})),this.pagesList[1]}}if(this.activePage>=this.pagesList[2]){if(0==this.pagesList[0])return this.pagesList[0];if(1==this.pagesList[0]){let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e-=1,this.pagesList.push(e)})),this.pagesList[1]}{let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e-=2,this.pagesList.push(e)})),this.pagesList[2]}}break;case 1:if(this.activePage==this.pagesList[0])return this.pagesList[1];if(this.activePage==this.pagesList[1])return this.pagesList[1];if(this.activePage>=this.pagesList[2]){if(0==this.pagesList[0])return this.pagesList[1];{let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e-=1,this.pagesList.push(e)})),this.pagesList[2]}}break;case 2:return this.pagesList[2];case 3:if(this.activePage>=this.pagesList[3])return this.pagesList[3];if(this.activePage<=this.pagesList[2]){if(this.pagesList[4]==this.pagesCount-1)return this.pagesList[3];{let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e+=1,this.pagesList.push(e)})),this.pagesList[2]}}break;case 4:if(this.activePage==this.pagesList[4])return this.pagesList[4];if(this.activePage<=this.pagesList[3]){if(this.pagesList[4]==this.pagesCount-1)return this.pagesList[4];if(this.pagesList[4]==this.pagesCount-2||this.activePage==this.pagesList[3]){let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e+=1,this.pagesList.push(e)})),this.pagesList[3]}{let e=JSON.parse(JSON.stringify(this.pagesList));return this.pagesList=[],e.forEach((e=>{e+=2,this.pagesList.push(e)})),this.pagesList[2]}}break}},hideList(){this.$emit("onHide")}},mounted(){this.setPagesCount(this.pagesCount)}};const pe=(0,a.Z)(ge,[["render",$],["__scopeId","data-v-f1f7a5da"]]);var Ae=pe,fe={name:"HomeView",components:{SearchBar:J,UsersList:Ae},data(){return{isSearchListShowed:!1,isSourceListShowed:!0,isFriendsListShowed:!1,friendsList:[],isConnected:!1,isShowedWithFriendsCount:!1}},computed:{...(0,c.rn)({searchResults:e=>e.searchResults,sourceList:e=>e.sourceList})},methods:{setSearchResults(){this.isSearchListShowed=!0},recursionFriendsGet(e){this.getUserFriends(this.sourceList[e].id).then((s=>{console.log(s),e++,this.sourceList.length==e?(this.sortUsers(this.friendsList,0),this.isFriendsListShowed=!0,this.setUserFriends()):this.recursionFriendsGet(e)}))},buildFriendsList(){this.friendsList=[],this.recursionFriendsGet(0)},sortUsers(e,s){switch(s){case 0:e.sort(((e,s)=>e.last_name.toLowerCase().localeCompare(s.last_name.toLowerCase())));break;case 1:e.sort(((e,s)=>e.first_name.toLowerCase().localeCompare(s.first_name.toLowerCase())));break;case 2:e.sort(((e,s)=>s.commomFriends.length-e.commomFriends.length));break;default:return e}},getUserFriends(e){return new Promise((s=>{R.getInfo("friends.get",{user_id:e,fields:"sex,photo_100,bdate"},(t=>{t.response.items.forEach((s=>{s.commomFriends=[e];let t=this.friendsList.findIndex((e=>e.id===s.id));-1===t?this.friendsList.push(s):this.friendsList[t].commomFriends.push(e)})),s("isOverNotLast ")}))}))},setUserFriends(){if(this.friendsList.length<=0||!this.isShowedWithFriendsCount)return;let e=0;for(e=0;e<this.friendsList.length;e++)if(void 0===this.friendsList[e].friendsCount)break;let s=setInterval((()=>{this.getUserFriendsCount(this.friendsList[e]),e++,this.isShowedWithFriendsCount&&this.friendsList.length!=e||clearInterval(s)}),500)},getUserFriendsCount(e){let s=new Promise(((s,t)=>{R.getInfo("friends.get",{user_id:e.id},(e=>{e.error?t(e.error.error_msg):s(e.response.count)}))}));s.then((s=>{e.friendsCount=s}),(s=>{e.friendsCount="-"}))},logIn(){R.checkConnection((e=>{console.log(e),"connected"!==e.status?R.login((e=>{console.log(e),"connected"===e.status?this.isConnected=!0:this.isConnected=!1})):this.isConnected=!0}))}},mounted(){this.logIn()}};const me=(0,a.Z)(fe,[["render",I],["__scopeId","data-v-527c6f94"]]);var we=me,Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAYpJREFUWIXtls1KAlEYht/vzLTqh6KgqBsIlNDGFkmbWtUdRJuuoFvpOgpaZ7gJWiiEgyaNtRBcBCIMBLZQKs752jgkOer8eNzkuzzM4Xn5ft45wEz/XRTlUiKVyQqDL2S3e16r1b7iGDCiwA0DOUHCEubc7urK8o3rujKqARHm42R6b98wkCOipd6RZZoLW1HhAGCGgQvBdx6cmVsKfPhcfWxoN+AHl0oeOeXyaxw4EGAIR8Bf4sLHGtANH2lgGnBgyBYk0+mpwAGfIUykMlkhfldNJxz404IdyzoA6JaIFr0zxeqKmGJPe78kcdGx7TzQVwE/OAAIEqfRAnu4TIVLAHkgZBLqUJAWXBPRRPtPzMWnXgsGiuv9bAYi17YnOgeeBlrgVEoFpeiYmT8AgIg2BOg+aVnbOgyECiIdlQgdxZM2MXbBdM9EoA3XaSJwxOgyESrj/EzgW2SrMV5FoZLQqZQKUuLEW1EAdqfz3owKByK8it1W821tffMBxPPddvusXq9/xjEw00w/eCX7a2GhnhIAAAAASUVORK5CYII=";const Le=e=>((0,o.dD)("data-v-6c378a80"),e=e(),(0,o.Cn)(),e),ke={class:"user"},Se={class:"user-info"},ve=Le((()=>(0,o._)("img",{src:Ie,alt:""},null,-1))),ye=Le((()=>(0,o._)("p",null,"Вернуться назад",-1))),_e=[ve,ye],De=["src"],Ce={class:"user-data"},be={class:"name"},Fe={class:"bdate"},Oe={class:"sex"},Ue={class:"user-content"},Ee={class:"user-friends"},Ne=Le((()=>(0,o._)("h2",null,"Друзья из исходного списка:",-1))),Re={class:"user-wall"},xe=Le((()=>(0,o._)("h2",null,"Записи со стены пользователя",-1))),ze={key:0},Pe={key:1},Be={key:2};function Me(e,s,t,i,r,n){const a=(0,o.up)("UserInfoFull"),l=(0,o.up)("UserPost");return(0,o.wg)(),(0,o.iD)("div",ke,[(0,o._)("div",Se,[(0,o._)("div",{class:"go-back",onClick:s[0]||(s[0]=(...e)=>n.toMain&&n.toMain(...e))},_e),(0,o._)("img",{class:"user-photo",src:r.userInfo.photo_200,alt:""},null,8,De),(0,o._)("div",Ce,[(0,o._)("p",be,(0,x.zw)(r.userInfo.first_name)+" "+(0,x.zw)(r.userInfo.last_name),1),(0,o._)("p",Fe,"Дата рождения: "+(0,x.zw)(n.bDate),1),(0,o._)("p",Oe,"Пол: "+(0,x.zw)(n.sex),1)])]),(0,o._)("div",Ue,[(0,o._)("div",Ee,[Ne,(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.sourceFriends,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(a,{"user-info":e,"is-no-actions":!0},null,8,["user-info"])])))),128))])]),(0,o._)("div",Re,[xe,r.isPrivate?((0,o.wg)(),(0,o.iD)("p",ze,"У пользователя закрытый аккаунт")):0==r.userWall.length?((0,o.wg)(),(0,o.iD)("p",Pe,"У пользователя нет записей")):((0,o.wg)(),(0,o.iD)("ul",Be,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.userWall,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(l,{"item-info":e},null,8,["item-info"])])))),128))]))])])])}const Ve=e=>((0,o.dD)("data-v-6ac3cacd"),e=e(),(0,o.Cn)(),e),We={class:"user-post"},Ye={class:"post-date"},qe={class:"post-text"},He={class:"post-content"},Te={key:0,class:"photos post-content-item"},Je=["src"],Ge={key:1,class:"videos photos"},Ze=["src"],je={key:2,class:"audios"},Qe=["src"],Xe={key:3,class:"links"},Ke=["href"],$e={key:0,class:"link-image-wrapper"},es=["src"],ss={key:1,class:"link-no-image"},ts=Ve((()=>(0,o._)("p",null,"Ссылка",-1))),is={key:0},os={key:1},rs={class:"post-content repost"},ns={class:"post-text"},as={key:0,class:"photos"},ls=["src"],us={key:1,class:"videos photos"},cs=["src"],hs={key:2,class:"audios"},ds=["src"],gs={key:3,class:"links"},ps=["href"],As={key:0,class:"link-image-wrapper"},fs=["src"],ms={key:1,class:"link-no-image"},ws=Ve((()=>(0,o._)("p",null,"Ссылка",-1))),Is={key:0},Ls={key:1};function ks(e,s,t,i,r,n){return(0,o.wg)(),(0,o.iD)("div",We,[(0,o._)("p",Ye,(0,x.zw)(n.postDate),1),(0,o._)("p",qe,(0,x.zw)(t.itemInfo.text),1),(0,o._)("div",He,[n.postInfo.photos.length>0?((0,o.wg)(),(0,o.iD)("div",Te,[(0,o._)("ul",{class:(0,x.C_)(n.gridClass(n.postInfo.photos))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.postInfo.photos,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("img",{src:e,alt:""},null,8,Je)])))),128))],2)])):(0,o.kq)("",!0),n.postInfo.videos.length>0?((0,o.wg)(),(0,o.iD)("div",Ge,[(0,o._)("ul",{class:(0,x.C_)(n.gridClass(n.postInfo.videos))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.postInfo.videos,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("img",{src:e,alt:""},null,8,Ze)])))),128))],2)])):(0,o.kq)("",!0),n.postInfo.audios.length>0?((0,o.wg)(),(0,o.iD)("div",je,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.postInfo.audios,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("div",null,[(0,o._)("p",null,(0,x.zw)(e.artist),1),(0,o._)("p",null,(0,x.zw)(e.title),1)]),(0,o._)("audio",{src:e.url,controls:""},null,8,Qe)])))),128))])])):(0,o.kq)("",!0),n.postInfo.links.length>0?((0,o.wg)(),(0,o.iD)("div",Xe,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.postInfo.links,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("a",{href:e.url},[""!=e.photo?((0,o.wg)(),(0,o.iD)("div",$e,[(0,o._)("div",null,[(0,o._)("p",null,(0,x.zw)(e.title),1)]),(0,o._)("img",{src:e.photo},null,8,es)])):((0,o.wg)(),(0,o.iD)("div",ss,[ts,e.title?((0,o.wg)(),(0,o.iD)("p",is,(0,x.zw)(e.title),1)):((0,o.wg)(),(0,o.iD)("p",os,(0,x.zw)(e.url),1))]))],8,Ke)])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",rs,[(0,o._)("p",ns,(0,x.zw)(n.repostInfo.text),1),n.repostInfo.photos.length>0?((0,o.wg)(),(0,o.iD)("div",as,[(0,o._)("ul",{class:(0,x.C_)(n.gridClass(n.repostInfo.photos))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.repostInfo.photos,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("img",{src:e,alt:""},null,8,ls)])))),128))],2)])):(0,o.kq)("",!0),n.repostInfo.videos.length>0?((0,o.wg)(),(0,o.iD)("div",us,[(0,o._)("ul",{class:(0,x.C_)(n.gridClass(n.repostInfo.videos))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.repostInfo.videos,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("img",{src:e,alt:""},null,8,cs)])))),128))],2)])):(0,o.kq)("",!0),n.repostInfo.audios.length>0?((0,o.wg)(),(0,o.iD)("div",hs,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.repostInfo.audios,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("div",null,[(0,o._)("p",null,(0,x.zw)(e.artist),1),(0,o._)("p",null,(0,x.zw)(e.title),1)]),(0,o._)("audio",{src:e.url,controls:""},null,8,ds)])))),128))])])):(0,o.kq)("",!0),n.repostInfo.links.length>0?((0,o.wg)(),(0,o.iD)("div",gs,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.repostInfo.links,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("a",{href:e.url},[""!=e.photo?((0,o.wg)(),(0,o.iD)("div",As,[(0,o._)("div",null,[(0,o._)("p",null,(0,x.zw)(e.title),1)]),(0,o._)("img",{src:e.photo},null,8,fs)])):((0,o.wg)(),(0,o.iD)("div",ms,[ws,e.title?((0,o.wg)(),(0,o.iD)("p",Is,(0,x.zw)(e.title),1)):((0,o.wg)(),(0,o.iD)("p",Ls,(0,x.zw)(e.url),1))]))],8,ps)])))),128))])])):(0,o.kq)("",!0)])])}var Ss={name:"UserPost",props:["itemInfo"],data(){return{}},computed:{postDate(){let e=new Date(1e3*this.itemInfo.date),s=e.getFullYear(),t=e.getMonth(),i=e.getDate();return`${i}-${t}-${s}`},isRepost(){return this.itemInfo.copy_history},postInfo(){let e=[],s=[],t=[],i=[],o=this.itemInfo.text;return this.itemInfo.attachments.length>0&&this.itemInfo.attachments.forEach((o=>{if("audio"===o.type&&e.push(o.audio),"photo"===o.type&&s.push(o.photo.sizes[o.photo.sizes.length-1].url),"video"===o.type&&i.push(o.video.image[o.video.image.length-1].url),"link"===o.type){let e="",s="";o.link.photo&&(s=o.link.photo.sizes[o.link.photo.sizes.length-1].url),o.link.title&&(e=o.link.title),t.push({photo:s,title:e,url:o.link.url})}})),{audios:e,photos:s,text:o,links:t,videos:i}},repostInfo(){let e=[],s=[],t=[],i=[],o="";return this.itemInfo.copy_history&&(o=this.itemInfo.copy_history[0].text,this.itemInfo.copy_history[0].attachments&&this.itemInfo.copy_history[0].attachments.length>0&&this.itemInfo.copy_history[0].attachments.forEach((o=>{if("audio"===o.type&&e.push(o.audio),"photo"===o.type&&s.push(o.photo.sizes[o.photo.sizes.length-1].url),"video"===o.type&&t.push(o.video.image[o.video.image.length-1].url),"link"===o.type){let e="",s="";o.link.photo&&(s=o.link.photo.sizes[o.link.photo.sizes.length-1].url),o.link.title&&(e=o.link.title),i.push({photo:s,title:e,url:o.link.url})}}))),{audios:e,photos:s,text:o,links:i,videos:t}}},methods:{gridClass(e){let s=e.length;return 1==s?"grid-1-el":2==s?"grid-2-el":3==s?"grid-3-el":"grid-more-el"}}};const vs=(0,a.Z)(Ss,[["render",ks],["__scopeId","data-v-6ac3cacd"]]);var ys=vs,_s={name:"UserView",components:{UserInfoFull:de,UserPost:ys},data(){return{sourceFriends:[],user_id:this.$route.params.id,userInfo:{},userWall:[],isPrivate:!1}},computed:{sex(){switch(this.userInfo.sex){case 1:return"Ж";case 2:return"М";default:return"*"}},bDate(){return this.userInfo.bdate?this.userInfo.bdate:"не указана"},...(0,c.rn)({sourceList:e=>e.sourceList})},watch:{},methods:{toMain(){this.$router.back()},getUserFriends(){let e=this.$store.getters.getFriendsInSource;e=e.join(","),R.getInfo("users.get",{user_ids:e,fields:"sex,photo_100,bdate"},(e=>{this.sourceFriends=e.response}))},getUserInfo(){R.getInfo("users.get",{user_ids:this.user_id,fields:"sex,photo_200,bdate"},(e=>{this.userInfo=e.response[0]}))},getUserWall(){R.getInfo("wall.get",{owner_id:this.user_id},(e=>{e.error?this.isPrivate=!0:this.userWall=e.response.items}))}},created(){this.getUserFriends(),this.getUserInfo(),this.getUserWall()}};const Ds=(0,a.Z)(_s,[["render",Me],["__scopeId","data-v-6c378a80"]]);var Cs=Ds;const bs=[{path:"/",name:"home",component:we,meta:{keepAlive:!0}},{path:"/user/:id",name:"user",component:Cs,meta:{keepAlive:!1}}],Fs=(0,d.p7)({history:(0,d.r5)(),routes:bs});var Os=Fs;(0,i.ri)(u).use(Os).use(h).mount("#app")}},s={};function t(i){var o=s[i];if(void 0!==o)return o.exports;var r=s[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=e,function(){var e=[];t.O=function(s,i,o,r){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],r=e[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(t.O).every((function(e){return t.O[e](i[l])}))?i.splice(l--,1):(a=!1,r<n&&(n=r));if(a){e.splice(c--,1);var u=o();void 0!==u&&(s=u)}}return s}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,o,r]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,i){var o,r,n=i[0],a=i[1],l=i[2],u=0;if(n.some((function(s){return 0!==e[s]}))){for(o in a)t.o(a,o)&&(t.m[o]=a[o]);if(l)var c=l(t)}for(s&&s(i);u<n.length;u++)r=n[u],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},i=self["webpackChunkvk_test"]=self["webpackChunkvk_test"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(3604)}));i=t.O(i)})();
//# sourceMappingURL=app.a432c27c.js.map