(function(){"use strict";var e={4453:function(e,s,t){var i=t(9242),r=t(3396);function o(e,s,t,i,o,n){const a=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(a,null,{default:(0,r.w5)((({Component:s})=>[((0,r.wg)(),(0,r.j4)(r.Ob,null,[e.$route.meta.keepAlive?((0,r.wg)(),(0,r.j4)((0,r.LL)(s),{key:0})):(0,r.kq)("",!0)],1024)),e.$route.meta.keepAlive?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)((0,r.LL)(s),{key:0}))])),_:1})}var n={name:"App",components:{},data(){return{}},created(){localStorage.getItem("sourceList")&&this.$store.commit("setSourceList",JSON.parse(localStorage.getItem("sourceList")))}},a=t(89);const c=(0,a.Z)(n,[["render",o]]);var A=c,d=(t(7658),t(65)),u=(0,d.MT)({state:{apiConfig:{appID:"51774176",version:"5.154"},searchResults:[],sourceList:[]},getters:{isInSourceList:e=>s=>{let t=e.sourceList.findIndex((e=>e.id==s));return-1!=t}},mutations:{setSourceList(e,s){e.sourceList=s},setSearchResults(e,s){e.searchResults=s},addToSourceList(e,s){e.sourceList.push(s),localStorage.setItem("sourceList",JSON.stringify(e.sourceList))},removeFromSourceList(e,s){let t=e.sourceList.findIndex((e=>e.id==s.id));e.sourceList.splice(t,1),localStorage.setItem("sourceList",JSON.stringify(e.sourceList))}},actions:{},modules:{}}),l=t(2483);const h={class:"home"},m={class:"search"},f={class:"search-results"},p={class:"source-list"},g={class:"friends"};function w(e,s,t,i,o,n){const a=(0,r.up)("SearchBar"),c=(0,r.up)("UsersList");return(0,r.wg)(),(0,r.iD)("div",h,[(0,r._)("section",m,[(0,r.Wm)(a)]),(0,r._)("section",f,[(0,r.Wm)(c,{items:e.searchResults,startState:!1,mode:"search",title:"Количество результатов по вашему запросу : "},null,8,["items"])]),(0,r._)("section",p,[o.isSourceListShowed?((0,r.wg)(),(0,r.j4)(c,{key:1,items:e.sourceList,startState:o.isSourceListShowed,mode:"source",title:"Количество пользователей в исходном списке : ",onOnHide:s[1]||(s[1]=e=>o.isSourceListShowed=!1)},null,8,["items","startState"])):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn-add",onClick:s[0]||(s[0]=e=>o.isSourceListShowed=!0)},"Показать исходный список"))]),(0,r._)("section",g,[o.isFriendsListShowed?((0,r.wg)(),(0,r.j4)(c,{key:1,items:o.friendsList,startState:o.isFriendsListShowed,mode:"friends",title:"Количество пользователей в списке друзей: ",onOnHide:s[3]||(s[3]=e=>o.isFriendsListShowed=!1)},null,8,["items","startState"])):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn-add",onClick:s[2]||(s[2]=(...e)=>n.buildFriendsList&&n.buildFriendsList(...e))},"Построить"))])])}var S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAlxJREFUOE+dVTGLE0EUfm9OjYeeIZCAYJEU1wVC2oA7k+5ATOOSSlTUykYshCtOlMMDRbn8hCtULIRdEGNtZpJ06YUgh0o0kAQ5OCMRzD6ZIRvGdfdAq5m3M++b9733vbdYr9dXAADG4zHqNZfLUWjb++hZaEf9UAPaH/VeKbVFRJsAsKodAeAnIjY45/cXtnk49LPBsVqtHgs/NJvNs7PZ7DMAsIVjsFhDm1Kp1HqtVvsUB6bvGkD9WqvVWp1MJocLgGY+n68XCoVf2h4MBiv7+/vPiaiu7XQ6nSmXy9/jaC8pSyk/AEAeEbc55zshNXtVSt0mol0AGAkhztm0w3wbQCu6mRBiLQ4sdJZSfgOAtaQoDeV2u30hCILXiPjITnxcAZRSd4joKWPsmuM4L6PFMRF6nqepNBhjlxzHeWNHGHXodDrn5/P5O0R86LrudrQ4BtD3/Y0gCN4i4hPO+dZR0vA87y4RPWaMXXYc51X0rqHc7/dPDIfDqdabEOJ0tHq2LaU8AIBTmUwmXSqVfkTvLnUopXwPAOuIuOu67maczpRS94joAQB8EUIUjpSNFaW+J7PZ7MVisTjTOVRKnRyNRh4AbBjxIr7gnF9PlE0YTa/Xy0yn068AYLoHAExfawyrc0zXIOIzzvnNRMr2a0qpW0SkxX1mAXSIiDuc80a73b4SBMFeCOq67g07PcvWS+rNuCHg+/5VG9SO9I9pE5fkpIeSIl1W+V/AwqhtUCHEcZMGe3xF52KcwKMp6Ha7ZcbYQaVS+ajPDGXt+D9gcfn9a2Ingcf9DuJ+G78BR57ZovdonTQAAAAASUVORK5CYII=";const v=e=>((0,r.dD)("data-v-6dada907"),e=e(),(0,r.Cn)(),e),L={for:"searchBar"},I=v((()=>(0,r._)("img",{src:S,alt:""},null,-1))),y={key:0,class:"auto-complete"},k={key:0},b=["onClick"],D={key:1};function F(e,s,t,o,n,a){const c=(0,r.up)("UserInfoMin");return(0,r.wg)(),(0,r.iD)("div",{class:"search-container",onMouseleave:s[4]||(s[4]=e=>n.isSearched=!1),onMouseover:s[5]||(s[5]=e=>n.isSearched=!0)},[(0,r._)("label",L,[I,(0,r.wy)((0,r._)("input",{type:"search",id:"searchBar",name:"searchBar","onUpdate:modelValue":s[0]||(s[0]=e=>n.query=e),onInput:s[1]||(s[1]=(...e)=>a.fastSearch&&a.fastSearch(...e)),onKeydown:s[2]||(s[2]=(0,i.D2)(((...e)=>a.search&&a.search(...e)),["enter"])),placeholder:"Введите запрос..."},null,544),[[i.nr,n.query]]),(0,r._)("button",{onClick:s[3]||(s[3]=(...e)=>a.search&&a.search(...e))},"найти")]),(0,r.Wm)(i.uT,{name:"fade"},{default:(0,r.w5)((()=>[n.isSearched&&""!=n.query?((0,r.wg)(),(0,r.iD)("div",y,[n.autoCompleteResults.length>0?((0,r.wg)(),(0,r.iD)("ul",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.autoCompleteResults,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e,onClick:s=>a.selectQueryItem(e)},[(0,r.Wm)(c,{userInfo:e},null,8,["userInfo"])],8,b)))),128))])):((0,r.wg)(),(0,r.iD)("p",D,"По вашему запросу ничего не найдено"))])):(0,r.kq)("",!0)])),_:1})],32)}var C=t(7020),R=t.n(C);class O{constructor(){this.appID="51776175",this.v="5.154",this.init()}init(){R().init({apiId:this.appID}),R().Auth.getLoginStatus((e=>{console.log(e),"connected"!==e.status&&R().Auth.login((e=>{console.log(e)}))}))}getInfo(e,s,t){s.v=this.v,R().Api.call(e,s,t)}}var _=new O,U=t(7139);const E={class:"user-info-min"},M=["src"];function V(e,s,t,i,o,n){return(0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("img",{src:t.userInfo.photo_50,alt:""},null,8,M),(0,r._)("p",null,(0,U.zw)(t.userInfo.first_name)+" "+(0,U.zw)(t.userInfo.last_name),1)])}var T={name:"UserInfoMin",props:["userInfo"]};const N=(0,a.Z)(T,[["render",V],["__scopeId","data-v-83c710fa"]]);var Y=N,j=t(4806),x=t.n(j),B={name:"SearchBar",components:{UserInfoMin:Y},data(){return{query:"",autoCompleteResults:[],isSearched:!1}},watch:{query(e){document.querySelector(".search-container").style.maxHeight=""!=e?"400px":"40px"},isSearched(e){document.querySelector(".search-container").style.maxHeight=e?"400px":"40px"}},methods:{selectQueryItem(e){this.query=`${e.first_name} ${e.last_name}`,this.search()},search(){this.isSearched=!1,_.getInfo("users.search",{q:this.query,fields:"sex,photo_100,bdate",count:100,language:"ru"},(e=>{try{this.$store.commit("setSearchResults",e.response.items)}catch{this.isSearched=!1,this.$store.commit("setSearchResults",[])}}))},fastSearch:x().debounce((function(){this.isSearched=!0,_.getInfo("users.search",{q:this.query,fields:"photo_50",count:5,language:"ru"},(e=>{try{this.autoCompleteResults=e.response.items}catch{this.isSearched=!1,this.autoCompleteResults=[]}}))}),200)},created(){},mounted(){}};const W=(0,a.Z)(B,[["render",F],["__scopeId","data-v-6dada907"]]);var Z=W,H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAFdQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Dim1fwAAABx0Uk5TADNCAT04QcpQSchMy8lcT0jS1VvW3FFGTQJHQIpKf1gAAAABYktHRBycBEEHAAAACXBIWXMAAAAnAAAAJwEqCZFPAAAAgElEQVQ4y92QWQ6AMAgFcae1rnX3/vdUE2MECweQP5gJLQ/gRxXFCZukGWnzAik3tqQDdMQwVc1XEiPAiRHkL0PgjyHy21D4ZTStxgGarvcah3YYJ42byk8ONX6+j7Jx/180nvsE43V/0CD5BAyW38dILcsP3Uz6bFnZym2HH9UBeZEFV9HKSGUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDItMTRUMTA6MzU6MDIrMDE6MDD1ZNrFAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTAyLTE0VDEwOjM1OjAyKzAxOjAwhDlieQAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNDg3MDY0OTAy20ZKigAAABN0RVh0VGh1bWI6OlNpemUAMy4zNktCQoE1tJQAAABPdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy9jYXJsb3NwcmV2aS9rd2dOSmNOLzExNTcvMTQ4NzA4NjM0NS1jcm9zc184MTU3Ny5wbmcXpSMbAAAAAElFTkSuQmCC";const q={key:0,class:"list-control"},Q={key:0},P=["id"],X={key:0,class:"list-pages"},G=["onClick"];function z(e,s,t,o,n,a){const c=(0,r.up)("UserInfoFull");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n.isShowed?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("h3",null,(0,U.zw)(t.title)+" "+(0,U.zw)(t.items.length),1),(0,r._)("img",{src:H,alt:"",onClick:s[0]||(s[0]=(...e)=>a.hideList&&a.hideList(...e))})])):(0,r.kq)("",!0),(0,r.Wm)(i.uT,{name:"fade-to-top"},{default:(0,r.w5)((()=>[n.isShowed&&a.showedResults.length>0?((0,r.wg)(),(0,r.iD)("div",Q,[(0,r._)("ul",{id:t.mode+"List"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.showedResults,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e},[(0,r.Wm)(c,{userInfo:e,mode:t.mode},null,8,["userInfo","mode"])])))),128))],8,P),t.items.length/n.showedCount>1?((0,r.wg)(),(0,r.iD)("div",X,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(Math.ceil(t.items.length/n.showedCount),(e=>((0,r.wg)(),(0,r.iD)("span",{key:e,class:(0,U.C_)({"active-page":e==n.activePage+1}),onClick:s=>a.getToPage(e-1)},(0,U.zw)(e),11,G)))),128))])):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])),_:1})],64)}const J=["src"],K={class:"user-data"},$={class:"name"},ee={class:"bdate"},se={class:"sex"},te={key:0,class:"friends"},ie={class:"actions"};function re(e,s,t,o,n,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,U.C_)(["user-info-full",{"friend-card":"friends"===t.mode}]),style:(0,U.j5)({"background-color":a.panelBgColor}),onClick:s[2]||(s[2]=(...e)=>a.toPage&&a.toPage(...e))},[(0,r._)("img",{src:t.userInfo.photo_100,alt:""},null,8,J),(0,r._)("div",K,[(0,r._)("p",$,(0,U.zw)(t.userInfo.first_name)+" "+(0,U.zw)(t.userInfo.last_name),1),(0,r._)("p",ee,"Дата рождения: "+(0,U.zw)(a.bDate),1),(0,r._)("p",se,"Пол: "+(0,U.zw)(a.sex),1),"friends"==t.mode?((0,r.wg)(),(0,r.iD)("p",te,"В друзьях у: "+(0,U.zw)(t.userInfo.commomFriends.length)+" пользователя",1)):(0,r.kq)("",!0)]),(0,r._)("div",ie,[n.isInSorceList?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn-add btn-added",onClick:s[1]||(s[1]=(0,i.iM)(((...e)=>a.removeFromSourceList&&a.removeFromSourceList(...e)),["stop"]))},"Удалить")):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn-add",onClick:s[0]||(s[0]=(0,i.iM)(((...e)=>a.addToSourceList&&a.addToSourceList(...e)),["stop"]))},"Добавить"))])],6)}var oe={name:"UserInfoFull",props:["userInfo","mode"],data(){return{isInSorceList:this.$store.getters.isInSourceList(this.userInfo.id)}},computed:{sex(){switch(this.userInfo.sex){case 1:return"Ж";case 2:return"М";default:return"*"}},bDate(){return this.userInfo.bdate?this.userInfo.bdate:"не указана"},panelBgColor(){if("friends"!==this.mode)return"white";{let e=255-20*(this.userInfo.commomFriends.length-1),s=255-20*(this.userInfo.commomFriends.length-1)*.5;e<=0&&(e=20),s<=0&&(s=20);let t=`rgba(${e},${s},255,0.8)`;return t}}},methods:{toPage(){"friends"===this.mode&&this.$router.push(`/user/${this.userInfo.id}`)},addToSourceList(){this.$store.commit("addToSourceList",this.userInfo),this.isInSorceList=!0},removeFromSourceList(){this.$store.commit("removeFromSourceList",this.userInfo),this.isInSorceList=!1}}};const ne=(0,a.Z)(oe,[["render",re],["__scopeId","data-v-3e750486"]]);var ae=ne,ce={name:"UsersList",components:{UserInfoFull:ae},props:["items","startState","mode","title"],data(){return{showedCount:20,activePage:0,isShowed:this.startState}},computed:{showedResults(){let e=JSON.parse(JSON.stringify(this.items));return e.splice(this.showedCount*this.activePage,this.showedCount)}},watch:{showedResults(e){e.length>0&&(this.isShowed=!0)}},methods:{getToPage(e){this.activePage=e;let s=document.querySelector(`#${this.mode}List`);s.scrollTop=0,s.scrollIntoView({behavior:"smooth"})},hideList(){this.isShowed=!1,"source"!=this.mode&&"friends"!=this.mode||this.$emit("onHide")}}};const Ae=(0,a.Z)(ce,[["render",z],["__scopeId","data-v-0f4740f2"]]);var de=Ae,ue={name:"HomeView",components:{SearchBar:Z,UsersList:de},data(){return{isSourceListShowed:!0,isFriendsListShowed:!1,friendsList:[]}},computed:{...(0,d.rn)({searchResults:e=>e.searchResults,sourceList:e=>e.sourceList})},watch:{},methods:{buildFriendsList(){this.friendsList=[];for(let e=0;e<this.sourceList.length;e++)this.getUserFriends(this.sourceList[e].id);this.isFriendsListShowed=!0},getUserFriends(e){_.getInfo("friends.get",{user_id:e,fields:"sex,photo_100,bdate"},(s=>{s.response.items.forEach((s=>{s.commomFriends=[e];let t=this.friendsList.findIndex((e=>e.id===s.id));-1===t?this.friendsList.push(s):this.friendsList[t].commomFriends.push(e)}))}))}},created(){}};const le=(0,a.Z)(ue,[["render",w],["__scopeId","data-v-21ddaf4c"]]);var he=le;const me={class:"user"};function fe(e,s,t,i,o,n){return(0,r.wg)(),(0,r.iD)("div",me,(0,U.zw)(o.sourceFriends),1)}var pe={name:"UserView",components:{},data(){return{sourceFriends:[],user_id:this.$route.params.id}},computed:{...(0,d.rn)({sourceList:e=>e.sourceList})},watch:{},methods:{getUserFriends(){_.getInfo("friends.get",{user_id:this.user_id,fields:"sex,photo_100,bdate"},(e=>{let s=e.response.items;this.sourceList.forEach((e=>{-1!==s.findIndex((s=>s.id===e.id))&&this.sourceFriends.push(e)}))}))},getUserInfo(){_.getInfo("users.get",{user_ids:this.user_id,fields:"sex,photo_200,bdate"},(e=>{let s=e.response.items;this.sourceList.forEach((e=>{-1!==s.findIndex((s=>s.id===e.id))&&this.sourceFriends.push(e)}))}))}},created(){this.getUserFriends(),this.getUserInfo()}};const ge=(0,a.Z)(pe,[["render",fe],["__scopeId","data-v-3b7fb7dc"]]);var we=ge;const Se=[{path:"/",name:"home",component:he,meta:{keepAlive:!0}},{path:"/user/:id",name:"user",component:we,meta:{keepAlive:!1}}],ve=(0,l.p7)({history:(0,l.r5)(),routes:Se});var Le=ve;(0,i.ri)(A).use(Le).use(u).mount("#app")}},s={};function t(i){var r=s[i];if(void 0!==r)return r.exports;var o=s[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.m=e,function(){var e=[];t.O=function(s,i,r,o){if(!i){var n=1/0;for(d=0;d<e.length;d++){i=e[d][0],r=e[d][1],o=e[d][2];for(var a=!0,c=0;c<i.length;c++)(!1&o||n>=o)&&Object.keys(t.O).every((function(e){return t.O[e](i[c])}))?i.splice(c--,1):(a=!1,o<n&&(n=o));if(a){e.splice(d--,1);var A=r();void 0!==A&&(s=A)}}return s}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,r,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,i){var r,o,n=i[0],a=i[1],c=i[2],A=0;if(n.some((function(s){return 0!==e[s]}))){for(r in a)t.o(a,r)&&(t.m[r]=a[r]);if(c)var d=c(t)}for(s&&s(i);A<n.length;A++)o=n[A],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},i=self["webpackChunkvk_test"]=self["webpackChunkvk_test"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(4453)}));i=t.O(i)})();
//# sourceMappingURL=app.32a2e140.js.map