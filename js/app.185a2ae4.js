(function(){"use strict";var e={5237:function(e,t,s){var i=s(9242),o=s(3396);function r(e,t,s,i,r,n){const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(a)}var n={name:"App",components:{},data(){return{}},created(){sessionStorage.getItem("sourceList")&&this.$store.commit("setSourceList",JSON.parse(sessionStorage.getItem("sourceList")))}},a=s(89);const c=(0,a.Z)(n,[["render",r]]);var u=c,A=(s(7658),s(65)),d=(0,A.MT)({state:{apiConfig:{appID:"51776175",version:"5.154"},searchResults:[],sourceList:[]},getters:{isInSourceList:e=>t=>{let s=e.sourceList.findIndex((e=>e.id==t));return-1!=s}},mutations:{setSourceList(e,t){e.sourceList=t},setSearchResults(e,t){e.searchResults=t},addToSourceList(e,t){e.sourceList.push(t),sessionStorage.setItem("sourceList",JSON.stringify(e.sourceList))},removeFromSourceList(e,t){let s=e.sourceList.findIndex((e=>e.id==t.id));e.sourceList.splice(s,1),sessionStorage.setItem("sourceList",JSON.stringify(e.sourceList))}},actions:{},modules:{}}),l=s(2483);const h={class:"home"},f={class:"search"},m={class:"search-results"},p={class:"source-list"},g={class:"friends"};function S(e,t,s,i,r,n){const a=(0,o.up)("SearchBar"),c=(0,o.up)("UsersList");return(0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("section",f,[(0,o.Wm)(a)]),(0,o._)("section",m,[(0,o.Wm)(c,{items:e.searchResults,startState:!1,mode:"search",title:"Количество результатов по вашему запросу : "},null,8,["items"])]),(0,o._)("section",p,[r.isSourceListShowed?((0,o.wg)(),(0,o.j4)(c,{key:1,items:e.sourceList,startState:r.isSourceListShowed,mode:"source",title:"Количество пользователей в исходном списке : ",onOnHide:t[1]||(t[1]=e=>r.isSourceListShowed=!1)},null,8,["items","startState"])):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:t[0]||(t[0]=e=>r.isSourceListShowed=!0)},"Показать исходный список"))]),(0,o._)("section",g,[r.isFriendsListShowed?((0,o.wg)(),(0,o.j4)(c,{key:1,items:r.friendsList,startState:r.isFriendsListShowed,mode:"friends",title:"Количество пользователей в исходном списке : ",onOnHide:t[3]||(t[3]=e=>r.isFriendsListShowed=!1)},null,8,["items","startState"])):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:t[2]||(t[2]=(...e)=>n.buildFriendsList&&n.buildFriendsList(...e))},"Построить"))])])}var v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAlxJREFUOE+dVTGLE0EUfm9OjYeeIZCAYJEU1wVC2oA7k+5ATOOSSlTUykYshCtOlMMDRbn8hCtULIRdEGNtZpJ06YUgh0o0kAQ5OCMRzD6ZIRvGdfdAq5m3M++b9733vbdYr9dXAADG4zHqNZfLUWjb++hZaEf9UAPaH/VeKbVFRJsAsKodAeAnIjY45/cXtnk49LPBsVqtHgs/NJvNs7PZ7DMAsIVjsFhDm1Kp1HqtVvsUB6bvGkD9WqvVWp1MJocLgGY+n68XCoVf2h4MBiv7+/vPiaiu7XQ6nSmXy9/jaC8pSyk/AEAeEbc55zshNXtVSt0mol0AGAkhztm0w3wbQCu6mRBiLQ4sdJZSfgOAtaQoDeV2u30hCILXiPjITnxcAZRSd4joKWPsmuM4L6PFMRF6nqepNBhjlxzHeWNHGHXodDrn5/P5O0R86LrudrQ4BtD3/Y0gCN4i4hPO+dZR0vA87y4RPWaMXXYc51X0rqHc7/dPDIfDqdabEOJ0tHq2LaU8AIBTmUwmXSqVfkTvLnUopXwPAOuIuOu67maczpRS94joAQB8EUIUjpSNFaW+J7PZ7MVisTjTOVRKnRyNRh4AbBjxIr7gnF9PlE0YTa/Xy0yn068AYLoHAExfawyrc0zXIOIzzvnNRMr2a0qpW0SkxX1mAXSIiDuc80a73b4SBMFeCOq67g07PcvWS+rNuCHg+/5VG9SO9I9pE5fkpIeSIl1W+V/AwqhtUCHEcZMGe3xF52KcwKMp6Ha7ZcbYQaVS+ajPDGXt+D9gcfn9a2Ingcf9DuJ+G78BR57ZovdonTQAAAAASUVORK5CYII=";const w=e=>((0,o.dD)("data-v-89f89856"),e=e(),(0,o.Cn)(),e),L={for:"searchBar"},y=w((()=>(0,o._)("img",{src:v,alt:""},null,-1))),b={key:0,class:"auto-complete"},I={key:0},k=["onClick"],C={key:1};function D(e,t,s,r,n,a){const c=(0,o.up)("UserInfoMin");return(0,o.wg)(),(0,o.iD)("div",{class:"search-container",onMouseleave:t[4]||(t[4]=e=>n.isSearched=!1),onMouseover:t[5]||(t[5]=e=>n.isSearched=!0)},[(0,o._)("label",L,[y,(0,o.wy)((0,o._)("input",{type:"search",id:"searchBar",name:"searchBar","onUpdate:modelValue":t[0]||(t[0]=e=>n.query=e),onInput:t[1]||(t[1]=(...e)=>a.fastSearch&&a.fastSearch(...e)),onKeydown:t[2]||(t[2]=(0,i.D2)(((...e)=>a.search&&a.search(...e)),["enter"])),placeholder:"Введите запрос..."},null,544),[[i.nr,n.query]]),(0,o._)("button",{onClick:t[3]||(t[3]=(...e)=>a.search&&a.search(...e))},"найти")]),(0,o.Wm)(i.uT,{name:"fade"},{default:(0,o.w5)((()=>[n.isSearched&&""!=n.query?((0,o.wg)(),(0,o.iD)("div",b,[n.autoCompleteResults.length>0?((0,o.wg)(),(0,o.iD)("ul",I,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.autoCompleteResults,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,onClick:t=>a.selectQueryItem(e)},[(0,o.Wm)(c,{userInfo:e},null,8,["userInfo"])],8,k)))),128))])):((0,o.wg)(),(0,o.iD)("p",C,"По вашему запросу ничего не найдено"))])):(0,o.kq)("",!0)])),_:1})],32)}var O=s(7020),R=s.n(O),F=s(7139);const E={class:"user-info-min"},T=["src"];function _(e,t,s,i,r,n){return(0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("img",{src:s.userInfo.photo_50,alt:""},null,8,T),(0,o._)("p",null,(0,F.zw)(s.userInfo.first_name)+" "+(0,F.zw)(s.userInfo.last_name),1)])}var M={name:"UserInfoMin",props:["userInfo"]};const U=(0,a.Z)(M,[["render",_],["__scopeId","data-v-83c710fa"]]);var V=U,N=s(4806),j=s.n(N),B={name:"SearchBar",components:{UserInfoMin:V},data(){return{apiConfig:this.$store.state.apiConfig,query:"",autoCompleteResults:[],isSearched:!1}},watch:{query(e){document.querySelector(".search-container").style.maxHeight=""!=e?"400px":"40px"},isSearched(e){document.querySelector(".search-container").style.maxHeight=e?"400px":"40px"}},methods:{selectQueryItem(e){this.query=`${e.first_name} ${e.last_name}`,this.fastSearch(),this.search()},search(){this.isSearched=!0,R().Api.call("users.search",{q:this.query,v:this.apiConfig.version,fields:"sex,photo_100,bdate",count:100,language:"ru"},(e=>{try{this.$store.commit("setSearchResults",e.response.items)}catch{this.isSearched=!1,this.$store.commit("setSearchResults",[])}}))},fastSearch:j().debounce((function(){this.isSearched=!0,R().Api.call("users.search",{q:this.query,v:this.apiConfig.version,count:5,fields:"photo_50",language:"ru"},(e=>{try{this.autoCompleteResults=e.response.items}catch{this.isSearched=!1,this.autoCompleteResults=[]}}))}),200)},created(){R().init({apiId:this.apiConfig.appID})},mounted(){}};const Y=(0,a.Z)(B,[["render",D],["__scopeId","data-v-89f89856"]]);var W=Y,H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAFdQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Dim1fwAAABx0Uk5TADNCAT04QcpQSchMy8lcT0jS1VvW3FFGTQJHQIpKf1gAAAABYktHRBycBEEHAAAACXBIWXMAAAAnAAAAJwEqCZFPAAAAgElEQVQ4y92QWQ6AMAgFcae1rnX3/vdUE2MECweQP5gJLQ/gRxXFCZukGWnzAik3tqQDdMQwVc1XEiPAiRHkL0PgjyHy21D4ZTStxgGarvcah3YYJ42byk8ONX6+j7Jx/180nvsE43V/0CD5BAyW38dILcsP3Uz6bFnZym2HH9UBeZEFV9HKSGUAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDItMTRUMTA6MzU6MDIrMDE6MDD1ZNrFAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTAyLTE0VDEwOjM1OjAyKzAxOjAwhDlieQAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE2LTA2LTE2IFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ+a/NLYAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNDg3MDY0OTAy20ZKigAAABN0RVh0VGh1bWI6OlNpemUAMy4zNktCQoE1tJQAAABPdEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy9jYXJsb3NwcmV2aS9rd2dOSmNOLzExNTcvMTQ4NzA4NjM0NS1jcm9zc184MTU3Ny5wbmcXpSMbAAAAAElFTkSuQmCC";const Z={key:0,class:"list-control"},x={key:0},P=["id"],Q={key:0,class:"list-pages"},q=["onClick"];function X(e,t,s,r,n,a){const c=(0,o.up)("UserInfoFull");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n.isShowed?((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("h3",null,(0,F.zw)(s.title)+" "+(0,F.zw)(s.items.length),1),(0,o._)("img",{src:H,alt:"",onClick:t[0]||(t[0]=(...e)=>a.hideList&&a.hideList(...e))})])):(0,o.kq)("",!0),(0,o.Wm)(i.uT,{name:"fade-to-top"},{default:(0,o.w5)((()=>[n.isShowed&&a.showedResults.length>0?((0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("ul",{id:s.mode+"List"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.showedResults,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(c,{userInfo:e,mode:s.mode},null,8,["userInfo","mode"])])))),128))],8,P),s.items.length/n.showedCount>1?((0,o.wg)(),(0,o.iD)("div",Q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Math.ceil(s.items.length/n.showedCount),(e=>((0,o.wg)(),(0,o.iD)("span",{key:e,class:(0,F.C_)({"active-page":e==n.activePage+1}),onClick:t=>a.getToPage(e-1)},(0,F.zw)(e),11,q)))),128))])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1})],64)}const G=["src"],z={class:"user-data"},J={class:"name"},K={class:"bdate"},$={class:"sex"},ee={key:0,class:"friends"},te={class:"actions"};function se(e,t,s,i,r,n){return(0,o.wg)(),(0,o.iD)("div",{class:"user-info-full",style:(0,F.j5)({"background-color":n.panelBgColor})},[(0,o._)("img",{src:s.userInfo.photo_100,alt:""},null,8,G),(0,o._)("div",z,[(0,o._)("p",J,(0,F.zw)(s.userInfo.first_name)+" "+(0,F.zw)(s.userInfo.last_name),1),(0,o._)("p",K,"Дата рождения: "+(0,F.zw)(n.bDate),1),(0,o._)("p",$,"Пол: "+(0,F.zw)(n.sex),1),"friends"==s.mode?((0,o.wg)(),(0,o.iD)("p",ee,"В друзьях у: "+(0,F.zw)(s.userInfo.commomFriends.length)+" пользователя",1)):(0,o.kq)("",!0)]),(0,o._)("div",te,[r.isInSorceList?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn-add btn-added",onClick:t[1]||(t[1]=(...e)=>n.removeFromSourceList&&n.removeFromSourceList(...e))},"Удалить")):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn-add",onClick:t[0]||(t[0]=(...e)=>n.addToSourceList&&n.addToSourceList(...e))},"Добавить"))])],4)}var ie={name:"UserInfoFull",props:["userInfo","mode"],data(){return{isInSorceList:this.$store.getters.isInSourceList(this.userInfo.id)}},computed:{sex(){switch(this.userInfo.sex){case 1:return"Ж";case 2:return"М";default:return"*"}},bDate(){return this.userInfo.bdate?this.userInfo.bdate:"не указана"},panelBgColor(){if("friends"!==this.mode)return"white";{let e=255-20*(this.userInfo.commomFriends.length-1);e<0&&(e=0);let t=`rgba(${e},255,${e},0.8)`;return t}}},methods:{addToSourceList(){this.$store.commit("addToSourceList",this.userInfo),this.isInSorceList=!0},removeFromSourceList(){this.$store.commit("removeFromSourceList",this.userInfo),this.isInSorceList=!1}}};const oe=(0,a.Z)(ie,[["render",se],["__scopeId","data-v-5f77d008"]]);var re=oe,ne={name:"UsersList",components:{UserInfoFull:re},props:["items","startState","mode","title"],data(){return{showedCount:20,activePage:0,isShowed:this.startState}},computed:{showedResults(){let e=JSON.parse(JSON.stringify(this.items));return e.splice(this.showedCount*this.activePage,this.showedCount)}},watch:{showedResults(e){e.length>0&&(this.isShowed=!0)}},methods:{getToPage(e){this.activePage=e;let t=document.querySelector(`#${this.mode}List`);t.scrollTop=0,t.scrollIntoView({behavior:"smooth"})},hideList(){this.isShowed=!1,"source"!=this.mode&&"friends"!=this.mode||this.$emit("onHide")}}};const ae=(0,a.Z)(ne,[["render",X],["__scopeId","data-v-0f4740f2"]]);var ce=ae,ue={name:"HomeView",components:{SearchBar:W,UsersList:ce},data(){return{apiConfig:this.$store.state.apiConfig,isSourceListShowed:!0,isFriendsListShowed:!1,friendsList:[]}},computed:{...(0,A.rn)({searchResults:e=>e.searchResults,sourceList:e=>e.sourceList})},watch:{},methods:{buildFriendsList(){this.friendsList=[];for(let e=0;e<this.sourceList.length;e++)this.getUserFriends(this.sourceList[e].id);this.isFriendsListShowed=!0},getUserFriends(e){R().Api.call("friends.get",{user_id:e,fields:"sex,photo_100,bdate",v:this.apiConfig.version},(t=>{t.response.items.forEach((t=>{t.commomFriends=[e];let s=this.friendsList.findIndex((e=>e.id===t.id));-1===s?this.friendsList.push(t):this.friendsList[s].commomFriends.push(e)}))}))}},created(){R().init({apiId:this.apiConfig.appID})}};const Ae=(0,a.Z)(ue,[["render",S],["__scopeId","data-v-0958fff5"]]);var de=Ae;const le=[{path:"/",name:"home",component:de},{path:"/about",name:"about",component:()=>s.e(443).then(s.bind(s,833))}],he=(0,l.p7)({history:(0,l.r5)(),routes:le});var fe=he;(0,i.ri)(u).use(fe).use(d).mount("#app")}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.loaded=!0,r.exports}s.m=e,function(){var e=[];s.O=function(t,i,o,r){if(!i){var n=1/0;for(A=0;A<e.length;A++){i=e[A][0],o=e[A][1],r=e[A][2];for(var a=!0,c=0;c<i.length;c++)(!1&r||n>=r)&&Object.keys(s.O).every((function(e){return s.O[e](i[c])}))?i.splice(c--,1):(a=!1,r<n&&(n=r));if(a){e.splice(A--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var A=e.length;A>0&&e[A-1][2]>r;A--)e[A]=e[A-1];e[A]=[i,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,i){return s.f[i](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/about.2f5118e5.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vk_test:";s.l=function(i,o,r,n){if(e[i])e[i].push(o);else{var a,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),A=0;A<u.length;A++){var d=u[A];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+r){a=d;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",t+r),a.src=i),e[i]=[o];var l=function(t,s){a.onerror=a.onload=null,clearTimeout(h);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(s)})),t)return t(s)},h=setTimeout(l.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=l.bind(null,a.onerror),a.onload=l.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){s.p="/vk_test/"}(),function(){var e={143:0};s.f.j=function(t,i){var o=s.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var r=new Promise((function(s,i){o=e[t]=[s,i]}));i.push(o[2]=r);var n=s.p+s.u(t),a=new Error,c=function(i){if(s.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",a.name="ChunkLoadError",a.type=r,a.request=n,o[1](a)}};s.l(n,c,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,n=i[0],a=i[1],c=i[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(c)var A=c(s)}for(t&&t(i);u<n.length;u++)r=n[u],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(A)},i=self["webpackChunkvk_test"]=self["webpackChunkvk_test"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(5237)}));i=s.O(i)})();
//# sourceMappingURL=app.185a2ae4.js.map